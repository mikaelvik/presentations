<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Hackaton#1</title>
    <meta name="description" content="TestDemo">
    <meta name="author" content="Mikael Vik">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="../../reveal/css/reveal.css">
    <link rel="stylesheet" href="../../reveal/css/theme/solarized.css" id="theme">
    <link rel="stylesheet" href="css/testdemo.css">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="../../reveal/lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
        document.write('<link rel="stylesheet" href="../../reveal/css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf'
                : 'paper' )
                       + '.css" type="text/css" media="print">');
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <div class="slides">

        <section>
            <h1>Hackaton #1</h1>

            <p><a href="http://github.com/mikaelvik">Mikael Vik</a> / mikael.vik@gmail.com</a></p>
        </section>

        <section data-markdown>
            ## Agenda
            * Testing i C#
                * rammeverk
                * VS+ReSharper
            * NuGet
            * TeamCity
                * server og agentar
                * sette opp bygg
            * _Git_
            * _Dependency Injection_
            * Oppgåver
        </section>
        
        <section>
            <h3>Disclaimer</h3>
            <p>Mest for utviklarane..</p>
        </section>

        <section>
            <section data-markdown>
               <script type="text/template">
                ## Testing
                Test-rammeverk for C#:
                
                * [NUnit](https://github.com/nunit/nunit/wiki)
                    * støtta både av ReSharper og TeamCity
                    * har mykje av funksjonalitet eg ser etter
                * [FluentAssertions](http://www.fluentassertions.com/)
                    * kraftige og lesbare asserts
                * [Moq](https://github.com/Moq/moq4/wiki/Quickstart)
                    * suveren mocking                  
                * inkluderer vha NuGet-pakkar
                </script>
            </section>
            <section data-markdown>
                ### ReSharper
                
                * [TestCop](https://testcop.codeplex.com/) for ReSharper (plugin)                   
                    * hoppe mellom test og implementasjon
                    * opprette test 
                    * rename av kode -> rename av testkode
                * Oppretta et par live templates
                    * ntest, nsetup, nfixture
                * Shortcuts
                    * Hoppe mellom test og kode: **Ctrl+G, Ctrl+T**
                    * Køyr testar: **Ctrl+U,R** og *Ctrl+U,Ctrl+R*
            </section>
            <section>
              <div  class=small>
                <h3>Plassering av testar</h3>
                
                <p>Gitt en solution med ett eller fleire kodeprosjekt</p>
                
                <ul>
                  <li>Hovedsaklig tre måtar:</li>
                  <ol>
                    <li>fleire testprosjekt identifisert vha namespace</li>
                    <ul>
                      <li>FomoLib -> FomoLib.Ninjas</li>
                      <li>FomoLib.Tests -> FomoLib.Tests.Ninjas</li>
                    </ul>
                    <li>fleire testprosjekt identifisert vha prosjektnavn</li>
                    <ul>
                      <li>FomoLib -> FomoLib.Ninjas</li>
                      <li>FomoLib.Tests -> FomoLib.Ninjas</li>
                    </ul>
                    <li>ett testprosjekt for alle kodeprosjekt</li>
                  </ol>
                </ul>
                
                <br/><br/>
                <p class="fragment grow">Demokoda brukar namespace </p>
                
                <div class="fragment roll-in">
                <ul>
                  <li>Likar nr to best:</li>
                  <ul>
                    <li>fint når kode og testar ligg i samme namespace </li>
                    <li style="font-size: 0.75em"><em>må først få slått av klaging i ReSharper...</em></li>
                  </ul>
                </ul>
                    
                <br/><br/>
                <p>Les meir om dette på  <a href="https://testcop.codeplex.com/">TestCop</a></p>
                </div>
              </div>
            </section>
            <section data-markdown>
                ### TDD
                
                * Opprett ny klasse
                * Få hjelp av TestCop til å lage test
                * Gjenta:
                    * skriv test 
                    * test feilar
                    * skriv kode 
                    * test ok
                * La VS+RS generere manglande kode 
                * Flytt kode vha refaktorering
            </section>
            
            <section data-markdown contenteditable>
                <script type="text/template">
                ### Test-eksempel
                Enkelt-test 
```cs 
[Test]
public void Attack_Should_Mangle_Target()
{
    var target = "Morten";
    string result = _sword.Hit(target);
    result.Should().Match("Slice*in half*")
        .And.Contain(target);
}
```</script>
            </section>
        
            <section data-markdown contenteditable>
                <script type="text/template">
                ### Test-eksempel
                Parameterisert test 
```cs 
[TestCase("Kenneth")]
[TestCase("Thor")]
public void Attack_Should_Mangle_Target(string target)
{
    string result = _sword.Hit(target);
    result.Should().Match("Slice*in half*")
        .And.Contain(target);
}
```</script>
            </section>
        
            <section data-markdown contenteditable>
                <script type="text/template">
                ### Test-eksempel 
                Exception
```cs 
[Test]
public void Fail_When_Arming_Without_Weapon()
{
    // vanilla NUnit
    Assert.Catch<DisgruntledNinja>(() => _ninja.Arm(null));
    
    // FluentAssertions
    Action act = () => _ninja.Arm(null);
    act.ShouldThrow<DisgruntledNinja>()
        .WithMessage("?*hell no*");
}```</script>
            </section>
        </section>

        <!-- Test-demo -->
        <section data-background="#8F7700" data-transition="zoom" data-transition-speed="slow">
            <h1 style="color: black; font-size: 9em;">Demo</h1>
            <p style="color: black">Testing i VS</p>
        </section>
        
        <section>
            <section data-transition="fade" >
                <h2>NuGet</h2>
                <ul>
                    <li>Pakke-manager</li>
                    <div class="fragment">
                        <ul>
                            <li>konsumér</li>
                            <li>produsér</li>
                            <li>publisér</li>
                        </ul>
                    </div>
                    <div class="fragment">
                        <li>Kan pakke det meste</li>
                    </div>
                    <div class="fragment roll-in">
                        <li>Egentlig ei glorifisert zip-fil med tillegsinfo..</li>
                    </div>
                </ul>
            </section>
            <section data-markdown data-transition="fade" >
               ## NuGet-Server 
               
               * TeamCity har egen NuGet-feed
                   - innstillinger finn du [her](http://buildserver:8080/admin/admin.html?item=nugetServerSettingsTab)
                   - enkelt å legge den til i Visual Studio 
               * Kan (_og bør_) forandre korleis prosjekt byggast opp 
                   - kva skal vere NuGet-pakker
                   - kva skal installeres på maskina
                   - kan vi få opp GAC på bygge-agentene
               * Vi bør sette opp vår egen server etter kvart
            </section>
            <section data-markdown contenteditable data-transition="fade" >
                <script type="text/template">
                    ### .nuspec
                    
                    Spesifikasjons-template som kan brukast av TeamCity.
```xml  
<?xml version="1.0"?>
<package>
  <metadata>
    <id>$id$</id>
    <version>$version$</version>
    <title>$title$</title>    
    <authors>$author$</authors>
    <owners>$author$</owners>
    <requireLicenseAcceptance>false</requireLicenseAcceptance>
    <copyright>Copyright &#0169; 2015</copyright>
    <description>$description$</description>
    <frameworkAssemblies>
    </frameworkAssemblies>
    <dependencies>
    </dependencies>
  </metadata>
</package>


```</script>

            </section>
        </section>
        
        <section>            
            <section>
                <h2>TeamCity</h2>
                <p>Bygging og kontinuerlig integrasjon. Laga av <a href="http://jetbrains.com/teamcity">JetBrains</a>.</p>
                <ul>
                  <li>Server: har styringa</li>
                  <li>Agentar: gjer jobben</li>
                  <li>Masse plugins</li>
                  <li><p>Gratis for 20 bygg og 3 agentar</p>
                    <ul>
                      <li>overkommelig pris ved større behov</li>
                    </ul>
                  </li>
                </ul>
                
                <br/>
                <br/>
                <ul>
                  <li>Enkel installasjon
                    <ul>
                      <li>men tidkrevande å sette opp agentar for Invo-kode :)</li>
                    </ul>
                  </li>
                </ul>
                
            </section>
            
            <section data-markdown>
                ### TeamCity Features (utvalg)                    
                * Full støtte for .NET-prosjekt
                * PowerShell
                * Testar og testdekning                    
                * Kode-analyse
                * Bygge pakkar
                    * DLL
                    * NuGet
                    * WSP
                * BuildScreen
            </section>
            <section data-markdown>
                ### TeamCity-Ressursar
                - [TeamCity-Howtos (YouTube)](https://www.youtube.com/channel/UC7sNiHQuGi_YxQUm8my8abw/videos)
            </section>
            <section>
              <h3>Utfordringar</h3>
              <ul>
                <li>Referansar til assemblies 
                  <ul>
                    <li>stiller store krav til agentane</li>
                    <li><strong>kan</strong> bruke utviklar-maskiner</li>
                  </ul>
                </li>
                <li>Linka filer
                  <ul>
                    <li>meir kode må sjekkast ut </li>
                    <li>vanskelig å styre kva som blir påvirka av endringar</li>
                  </ul>
                </li>
              </ul>
            
              <br/>
              <br/>            
              <ul class="fragment fade-in">
                <li>To the rescue:
                  <ul>
                  <li>NuGet</li>
                  <li>GAC</li>
                    <li>Dependency Management-<a href="https://www.jfrog.com/blog/dependency-management-with-net-doing-it-right/">diskusjon</a> frå JFrog
                      <ul>
                        <li>endar sjølvsagt i en shameless plug for Artifactory</li>
                        <li class="fragment fade-in">... forståelig nok.</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </section>
            
            <section>
                <h3>Deploy</h3>
                
                <p>TeamCity er god på bygging av kode/pakkar, og _kan håndtere_ deployment.</p>
                                
                <ul>
                  <li><a href=https://octopus.com/">Octopus Deploy</a> er god på <strong>deploy</strong>
                  <li>TeamCity og Octopus Deploy samarbeider godt</li>
                  <ul>
                    <li>TeamCity: produserer artefakter</li>
                    <li>Octopus: konfigurere og distribuere</li>
                  </ul>
                </ul>
                <br/>
                <br/>
                <p class="fragment grow">Dette må vi sjå meir på seinere. </p>
            </section>
            
            <!-- TeamCity-demo -->
            <section data-background="#8F2400" data-transition="zoom" data-transition-speed="slow">
                <h1 style="color: black; font-size: 9em;">Demo</h1>
                <p style="color: black">TeamCity</p>
            </section>

        </section>

        <section>            
            <section data-background="#E1C5EB" data-background-transition="zoom">
                <h2>Oppgåver</h2>
                <ul>
                  <li><a href="buildserver:8080">TeamCity</a></li>
                  <li><a href="https://github.com/mikaelvik/TestDemo/tree/master/FomoHack">Fomo/Ninjas</a></li>
                  <li><a href="https://github.com/mikaelvik/TestDemo/tree/master/CodeKata">CodeKata</a></li>
                </ul>
                
                <div style="margin-top: 40px">
                <p>Korleis få opna eit Git-prosjekt i <a href="http://rickrainey.com/2013/07/27/visual-studio-and-gitub-the-basics-of-working-with-existing-repositories-2/">
                  Visual Studio
                </a>:</p>
                <p>Scroll til "Cloning a Repository".</p>
                
                <p>
                Url du skal connecte mot er: <br/>- https://github.com/mikaelvik/TestDemo/
                </p>
                <div>
            </section>
     
            <section class=medium>
              <h2>Oppgåver - TeamCity</h2>
              <p>Velg mellom oppgåvene under:</p>
              <ul>
                <li>Sett opp <a href="https://confluence.jetbrains.com/display/TCD9/Build+Configuration">nytt bygg</a></li>
                <li>Sett opp agent på ei ny maskin
                  <ul>
                    <li>last ned <a href="http://buildserver:8080/update/agentInstaller.exe">installer</a> frå serveren
                    <li>evt sjå på konfigurering av agentar </li>
                  </ul>
                </li>
                <li>Få Invo-kode til å bygge på buildserver-agenten
                  <ul>
                    <li>sjekk <a href="http://buildserver:8080/project.html?projectId=InvoSharepointSolution">SPS-prosjektet</a> på buildserver</li>
                    <li>installer det som manglar, evt</li>
                    <li>sett opp <a href="http://www.synteractiveingenuity.com/wordpress/2012/05/14/building-a-sharepoint-2010-wsp-using-teamcity/">GAC</a> for å håndtere assemblies</li>
                  </ul>
                </li>
                <li>Legg til bygging av <a href="http://www.synteractiveingenuity.com/wordpress/2012/05/14/building-a-sharepoint-2010-wsp-using-teamcity/">wsp-pakkar</a></li>
                <li>Prøv ut <a href="https://confluence.jetbrains.com/display/TCD9/PowerShell">PowerShell-steg</a></li>
                <li>Sett opp <a href="https://confluence.jetbrains.com/display/TCD9/NTLM+HTTP+Authentication">autentisering</a> mot AD</li>
                <li>Sjå på byggeskjerm
                  <ul>
                    <li><a href="https://buildscreen.codeplex.com/">BuildScreen</a>: frittståande app</li>
                    <li><a href="https://chrome.google.com/webstore/detail/teamcity-status-monitor/ojkkaphfgjpbckihnbbminnoenhndeje?hl=en-GB">Status Monitor</a>: Chrome-plugin</li>
                  </ul>
                </li>
              </ul>
              <br/>
              <br/>
              <p>Eller nåke anna du føler for..</p>
            </section>
            <section data-markdown  data-background="assets/fomo1.jpg" class="bright medium">
                ## Oppgåver - Fomo/Ninjas
                * Utvid med fleire testar og meir kode
                    * fleire våpen
                    * Target-klasse (i staden for 'string')
                        - evt interface.. Ninja og Peasant
                    * life force vs damage                    
                    * bedre våpen
                        * gi damage?
                * Sette opp bygg i TeamCity 
                    * NuGet Package Restore
                    * bygg kode
                    * køyr testar
                    * inspections og coverage
                    * produsere NuGet-pakke 
            </section>
            <section>
              <h3>Oppgåver - CodeKata</h3>
              <p><a href="http://butunclebob.com/files/downloads/Bowling%20Game%20Kata.ppt">Bowling Game</a> (ppt, <em>klassikar</em> frå Uncle Bob)</p>
              <p><a href="http://codekata.com/">CodeKata</a>, info og oppgåver</p>
              
              <br/>
              <ul>                
                <li>Små programmeringsoppgåver
                  <ul>
                    <li>"practice makes perfect"</li>
                  </ul>
                </li>
                <li>Hent ned kode (<em>TestDemo</em>)
                  <ul>
                    <li>Direkte i Visual Studio (sjå første Oppgåve-slide)</li>
                    <li><em>Installér SourceTree eller GitHub Desktop</em></li>
                    <li><em>Kommandolinje...</em></li>
                  </ul>
                </li>
                <li><p>To projekt under TestDemo/CodeKata </p>
                  <ul>
                    <li>Code </li>
                    <li>Code.Tests </li>
                  </ul>
                </li>
                <li><p>Bør vere sjølvforklarande...</p></li>
              </ul>             
            </section>
        </section>

        <section data-background="#EE9732" data-transition="zoom" data-transition-speed="slow">
            <h1 style="color: black;">Spørsmål?</h1>
            <img height="350" src="assets/stupidpeople.jpg" alt="">
        </section>

        <section data-background="#B8E0DE" data-transition="fade" data-transition-speed="slow">
            <h2>Neste Hackaton</h2>
            
            <ul>
              <li>Dependency Injection</li>
              <ul>
                <li><a href="https://github.com/ninject/ninject">Ninject</a></li>
                <li>evt andre alternativ</li>
              </ul>
              <li>Git</li>
              <ul>
                  <li>Git vs TFVC</li>
                  <li>Bloggpost på <a href="https://msdn.microsoft.com/en-us/Library/vs/alm/Code/overview?f=255&MSPPError=-2147217396">MSDN</a></li>
              </ul>
              <li>Meir om TeamCity
                <ul>
                  <li>bygg trigga av andre bygg</li>
                  <li>bygg trigga av endra avhengigheter</li>
                </ul>
              </li>              
            </ul>
            
            <br/>
            <br/>
            <p>Andre temas?!?</p>
            <br/>
            <p class="fragment grow">Alle er sjølvsagt velkomne.</p>
        </section>
    </div>

</div>

<script src="../../reveal/lib/js/head.min.js"></script>
<script src="../../reveal/js/reveal.min.js"></script>

<script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
                          controls: true,
                          progress: true,
                          history: true,
                          center: true,

                          theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                          transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                          // Optional libraries used to extend on reveal.js
                          dependencies: [
                              {
                                  src: '../../reveal/lib/js/classList.js', condition: function () {
                                  return !document.body.classList;
                              }
                              },
                              {
                                  src: '../../reveal/plugin/markdown/marked.js', condition: function () {
                                  return !!document.querySelector('[data-markdown]');
                              }
                              },
                              {
                                  src: '../../reveal/plugin/markdown/markdown.js', condition: function () {
                                  return !!document.querySelector('[data-markdown]');
                              }
                              },
                              {
                                  src: '../../reveal/plugin/highlight/highlight.js', async: true, callback: function () {
                                  hljs.initHighlightingOnLoad();
                              }
                              },
                              {
                                  src: '../../reveal/plugin/zoom-js/zoom.js', async: true, condition: function () {
                                  return !!document.body.classList;
                              }
                              },
                              {
                                  src: '../../reveal/plugin/notes/notes.js', async: true, condition: function () {
                                  return !!document.body.classList;
                              }
                              }
                          ]
                      });

</script>

</body>
</html>
